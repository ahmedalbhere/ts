<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TS - TikTok Style Shorts</title>
<style>
:root {
  --bg:#000;
  --text:#fff;
  --accent:#0f9dff;
}
body.light {
  --bg:#fff;
  --text:#000;
  --accent:#0077ff;
}
body {
  margin:0;
  background:var(--bg);
  color:var(--text);
  overflow:hidden;
  height:100vh;
  font-family:Arial, sans-serif;
}
header {
  position:fixed;
  top:0; left:0; right:0;
  padding:10px 15px;
  font-size:22px;
  color:var(--accent);
  z-index:100;
  background:rgba(0,0,0,0.3);
  backdrop-filter:blur(3px);
}
.toggle {
  float:right;
  background:var(--accent);
  color:#fff;
  padding:5px 10px;
  border:none;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
}
#player {
  width:100%;
  height:100vh;
  border:none;
}
</style>
</head>
<body>
<header>TS
  <button class="toggle" onclick="toggleTheme()">â˜€/ðŸŒ™</button>
</header>
<iframe id="player" allowfullscreen></iframe>

<script>
// Dark / Light
function toggleTheme(){ document.body.classList.toggle("light"); }

// ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙˆÙ…ØµØ§Ø¯Ø±
let videos = [], index=0;

// Ø¬Ù„Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† TikTok Scraper Ù…Ø¬Ø§Ù†ÙŠ + Pexels + Pixabay
async function loadVideos(){
  try{
    // 1) TikTok Trending Free Scraper
    let tiktokRes = await fetch("https://tiktok-scraper-proxy.vercel.app/trending"); 
    let tiktokData = await tiktokRes.json();
    tiktokData.forEach(v=>videos.push(v.videoUrl));

    // 2) Pexels Videos (Ù…Ø«Ø§Ù„: 5 ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ©)
    let pexelsRes = await fetch("https://api.pexels.com/videos/popular?per_page=5",{
      headers:{Authorization:"YOUR_PEXELS_API_KEY"}
    });
    let pexelsData = await pexelsRes.json();
    pexelsData.videos.forEach(v=>videos.push(v.video_files[0].link));

    // 3) Pixabay Videos (Ù…Ø«Ø§Ù„: 5 ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ©)
    let pixRes = await fetch("https://pixabay.com/api/videos/?key=YOUR_PIXABAY_API_KEY&per_page=5");
    let pixData = await pixRes.json();
    pixData.hits.forEach(v=>videos.push(v.videos.medium.url));

    showVideo(0);
  } catch(e){
    alert("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ù…ÙØªØ§Ø­ Pexels Ùˆ Pixabay API");
  }
}

// Ø¹Ø±Ø¶ ÙÙŠØ¯ÙŠÙˆ
function showVideo(i){
  index=i;
  document.getElementById("player").src=videos[i];
}

// Swipe Ù„Ø£Ø¹Ù„Ù‰ / Ø£Ø³ÙÙ„
let startY=0;
document.addEventListener("touchstart",e=>{ startY=e.touches[0].clientY; });
document.addEventListener("touchend",e=>{
  let endY=e.changedTouches[0].clientY;
  if(startY-endY>50){ if(index<videos.length-1) showVideo(index+1);}
  if(endY-startY>50){ if(index>0) showVideo(index-1);}
});

loadVideos();
</script>
</body>
</html>
