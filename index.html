<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TS - Shorts</title>
<style>
:root {
  --bg:#000;
  --text:#fff;
  --accent:#0f9dff;
}
body.light {
  --bg:#fff;
  --text:#000;
  --accent:#0077ff;
}
body {
  margin:0;
  background:var(--bg);
  color:var(--text);
  overflow:hidden;
  height:100vh;
  font-family:Arial, sans-serif;
}
header {
  position:fixed;
  top:0; left:0; right:0;
  padding:10px 15px;
  font-size:22px;
  color:var(--accent);
  z-index:100;
  background:rgba(0,0,0,0.3);
  backdrop-filter:blur(3px);
}
.toggle {
  float:right;
  background:var(--accent);
  color:#fff;
  padding:5px 10px;
  border:none;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
}
#player {
  width:100%;
  height:100vh;
  border:none;
}
</style>
</head>
<body>
<header>TS
  <button class="toggle" onclick="toggleTheme()">â˜€/ğŸŒ™</button>
</header>
<iframe id="player" allowfullscreen></iframe>

<script>
// Dark / Light
function toggleTheme(){ document.body.classList.toggle("light"); }

let videos = [], index=0;

// Ø¬Ù„Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† YouTube RSS (ØªØ±Ù†Ø¯) + Pexels + Pixabay
async function loadVideos(){
  try{
    // ----------------------
    // 1) YouTube Trending RSS
    // ----------------------
    const ytRSS = "https://api.codetabs.com/v1/proxy/?quest=https://www.youtube.com/feeds/videos.xml?playlist_id=PLrEnWoR732-BHrPp_Pm8_VleD68f9s14-";
    const resYt = await fetch(ytRSS);
    const xmlYt = await resYt.text();
    const parser = new DOMParser();
    const data = parser.parseFromString(xmlYt,"text/xml");
    const entries = data.getElementsByTagName("entry");
    for(let i=0;i<entries.length;i++){
      let link = entries[i].getElementsByTagName("link")[0].getAttribute("href");
      videos.push(link.replace("watch?v=","embed/"));
    }

    // ----------------------
    // 2) Pexels (Ù…Ø«Ø§Ù„ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ©)
    // ----------------------
    videos.push("https://player.vimeo.com/external/430450414.hd.mp4?s=40f5f64c1b66c734f3f1d19f6a7cd322f847b47b&profile_id=174");
    videos.push("https://player.vimeo.com/external/449001604.hd.mp4?s=206d06f2b37f85e1d446a7889ffbdbfa8a0c1c20&profile_id=174");

    // ----------------------
    // 3) Pixabay (Ù…Ø«Ø§Ù„ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ©)
    // ----------------------
    videos.push("https://cdn.pixabay.com/vimeo/431564119/pexels-video-431564119.mp4?width=1280&hash=872ad344f07dc4d7b02f7b9f18c5e9f0");
    videos.push("https://cdn.pixabay.com/vimeo/427877225/pexels-video-427877225.mp4?width=1280&hash=1f2b5e7d6c9e08a4d6abf0a0f3c7e2c5");

    showVideo(0);
  } catch(e){
    alert("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª");
  }
}

// Ø¹Ø±Ø¶ ÙÙŠØ¯ÙŠÙˆ
function showVideo(i){
  index=i;
  document.getElementById("player").src=videos[i];
}

// Swipe Ù„Ø£Ø¹Ù„Ù‰ / Ø£Ø³ÙÙ„
let startY=0;
document.addEventListener("touchstart",e=>{ startY=e.touches[0].clientY; });
document.addEventListener("touchend",e=>{
  let endY=e.changedTouches[0].clientY;
  if(startY-endY>50){ if(index<videos.length-1) showVideo(index+1);}
  if(endY-startY>50){ if(index>0) showVideo(index-1);}
});

// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
loadVideos();
</script>
</body>
</html>
