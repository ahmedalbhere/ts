<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TS - Shorts Viewer</title>

<style>
    :root {
        --bg: #000;
        --text: #fff;
        --accent: #0f9dff;
    }
    body.light {
        --bg: #fff;
        --text: #000;
    }
    body {
        margin:0;
        background:var(--bg);
        color:var(--text);
        height:100vh;
        overflow:hidden;
        font-family:Arial;
    }

    header {
        position:fixed;
        top:0; left:0; right:0;
        padding:12px 20px;
        display:flex;
        justify-content:space-between;
        z-index:999;
        background:rgba(0,0,0,0.4);
        backdrop-filter:blur(3px);
    }
    .logo {
        font-size:22px;
        font-weight:bold;
        color:var(--accent);
    }
    .toggle {
        background:var(--accent);
        color:#fff;
        padding:6px 12px;
        border:none;
        border-radius:8px;
        font-weight:bold;
    }

    #viewer {
        height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
    }

    iframe {
        width:100%;
        height:100%;
        border:none;
    }
</style>
</head>

<body>

<header>
    <div class="logo">TS</div>
    <button class="toggle" onclick="toggleTheme()">â˜€/ðŸŒ™</button>
</header>

<div id="viewer">
    <iframe id="player" allowfullscreen></iframe>
</div>

<script>
// ======================
// 1- ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹
// ======================
function toggleTheme(){
    document.body.classList.toggle("light");
}

// ======================
// 2- Ø¬Ù„Ø¨ Ø§Ù„ØªØ±Ù†Ø¯ Ù…Ù† RSS
// ======================
let videos = [];
let index = 0;

async function load() {
    try {
        const url = "https://api.allorigins.win/raw?url=https://www.youtube.com/feeds/videos.xml?playlist_id=PLrEnWoR732-BHrPp_Pm8_VleD68f9s14-";
        const res = await fetch(url);
        const xml = await res.text();

        const parser = new DOMParser();
        const data = parser.parseFromString(xml, "text/xml");

        const entries = data.getElementsByTagName("entry");

        for (let i = 0; i < entries.length; i++) {
            const link = entries[i].getElementsByTagName("link")[0].getAttribute("href");
            const embed = link.replace("watch?v=", "embed/");
            videos.push(embed);
        }

        showVideo(0);

    } catch (err) {
        alert("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª");
    }
}

// ======================
// 3- Ø¹Ø±Ø¶ ÙÙŠØ¯ÙŠÙˆ ÙˆØ§Ø­Ø¯
// ======================
function showVideo(i){
    index = i;
    document.getElementById("player").src = videos[i];
}

// ======================
// 4- Ø§Ù„Ø³Ø­Ø¨ Ù…Ø«Ù„ ØªÙŠÙƒ ØªÙˆÙƒ
// ======================
let startY = 0;

document.addEventListener("touchstart", e=>{
    startY = e.touches[0].clientY;
});

document.addEventListener("touchend", e=>{
    let endY = e.changedTouches[0].clientY;

    if(startY - endY > 50){
        // Ø³Ø­Ø¨ Ù„Ø£Ø¹Ù„Ù‰ = Ø§Ù„ØªØ§Ù„ÙŠ
        if(index < videos.length - 1) showVideo(index + 1);
    }

    if(endY - startY > 50){
        // Ø³Ø­Ø¨ Ù„Ø£Ø³ÙÙ„ = Ø§Ù„Ø³Ø§Ø¨Ù‚
        if(index > 0) showVideo(index - 1);
    }
});

// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
load();
</script>

</body>
</html>
